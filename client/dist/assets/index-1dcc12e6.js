import{A as j,r as u,u as Q,a as A,b as H,c as P,d as U,e as B,f as M,j as e,L as m,$ as p,_ as y,T as z}from"./index-2825ce6d.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[n]="c0da87b3-7f6e-4caa-8a8c-4505736d5c52",r._sentryDebugIdIdentifier="sentry-dbid-c0da87b3-7f6e-4caa-8a8c-4505736d5c52")}catch{}})();const R=async(r,n)=>{const a=localStorage.getItem("authToken")??"";try{r({type:"FETCH_ELECTIONS_DETAIL_REQUEST"});const o=await fetch(`${j}/election/${n}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});debugger;const i=await o.json();debugger;r({type:"FETCH_ELECTIONS_DETAIL_SUCCESS",payload:i})}catch(o){console.log("Error fetching selected elction:",o),r({type:"FETCH_ELECTIONS_DETAIL_FAILURE",payload:"Unable to load selected election"})}},q=async(r,n,a)=>{try{debugger;const o=localStorage.getItem("authToken")??"",i=await fetch(`${j}/election/${n}/addQuestion`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(a)});debugger;const c=await i.json();if(!i.ok)throw new Error("Failed to create election");return c.error?{ok:!1,error:c.error}:(r({type:"ADD_QUETION_SUCCESS",payload:c}),{ok:!0})}catch(o){return console.error("Operation failed:",o),{ok:!1,error:o}}},V=async(r,n)=>{try{const a=localStorage.getItem("authToken")??"";debugger;const o=await fetch(`${j}/election/delque/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(!o.ok)throw new Error("Failed to delete quetion "+n);const i=await o.json();debugger;return i.error?{ok:!1,error:i.error}:i.success?(r({type:"DELETE_QUETION_SUCCESS",payload:n}),{ok:!0}):{ok:!1}}catch(a){return console.error("Operation failed:",a),{ok:!1,error:a}}},K=()=>{var N,w,E,T,k,S;let[r,n]=u.useState(!1);const[a,o]=u.useState(null),i=()=>n(!0),c=()=>n(!1),{register:v,handleSubmit:_,formState:{errors:x}}=Q(),f=A(),$=H();let{electionID:h}=P();const{t:l}=U();debugger;const C=B(),{electionDetail:t,isLoading:F,isError:G,errorMessage:Y}=C,b=M();u.useEffect(()=>{h&&R(b,h)},[h,$,b]);const d=(N=f==null?void 0:f.elections.filter(s=>`${s==null?void 0:s.id}`===h))==null?void 0:N[0];if(F)return e.jsx(e.Fragment,{children:l("loading")});if(!d)return e.jsx("p",{className:"font-semibold text-center text-red-500",children:"There is not such a Election"});const L=async s=>{console.log(s);const g=await V(b,s);console.log(g)},D=async s=>{const{title:g,desc:O}=s,I=await q(b,d==null?void 0:d.id,{title:g,desc:O});debugger;I.ok?n(!1):o(I.error)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto mb-3",children:e.jsxs(m,{to:"/account/election",className:"rounded text-white bg-black text-sm inline px-2 py-2",children:[" ","Go to List Of Election"]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h2",{className:"text-2xl mt-3 text-green-700 font-medium tracking-tight  dark:text-zinc-50",children:["Manage :"," ",e.jsx("span",{className:"font-semibold underline",children:d==null?void 0:d.title})]}),e.jsx("button",{id:"newTaskBtn",onClick:i,className:"rounded-md bg-blue-600 px-4 py-2 m-2 text-sm font-medium text-white hover:bg-opacity-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75",children:l("newQuetionButtonText")}),e.jsx(p,{appear:!0,show:r,as:u.Fragment,children:e.jsxs(y,{as:"div",className:"relative z-10",onClose:c,children:[e.jsx(p.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(p.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(y.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(y.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:l("NewQuetionModalHeader")}),e.jsx("div",{className:"mt-2",children:e.jsxs("form",{onSubmit:_(D),children:[a&&e.jsx("span",{className:"text-red-500",children:a}),e.jsx("input",{type:"text",id:"name",placeholder:l("newQueTitlePlaceHolder"),autoFocus:!0,...v("title",{required:!0}),className:`w-full border rounded-md py-2 px-3 my-4 text-gray-700 leading-tight focus:outline-none focus:border-blue-500 focus:shadow-outline-blue ${x.title?"border-red-500":""}`}),x.title&&e.jsx("span",{className:"text-red-500",children:"This field is required"}),e.jsx("input",{type:"text",id:"url",placeholder:l("newQueDescriptionPlaceHolder"),autoFocus:!0,...v("desc",{required:!0}),className:`w-full border rounded-md py-2 px-3 mb-4 text-gray-700 leading-tight focus:outline-none focus:border-blue-500 focus:shadow-outline-blue ${x.desc?"border-red-500":""}`}),x.desc&&e.jsx("span",{className:"text-red-500",children:"This field is required"}),e.jsx("button",{type:"submit",id:"create-member-btn",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 mr-2 text-sm font-medium text-white hover:bg-blue-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",children:l("submitButtonText")}),e.jsx("button",{type:"submit",onClick:c,className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",children:l("cancelButtonText")})]})})]})})})})]})})]}),((w=t==null?void 0:t.election)==null?void 0:w.launch)&&e.jsxs("div",{children:[e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-green-900 bg-green-200 font-bold text-center mt-3 text-md",children:"Election is Launched ..."})}),e.jsxs("div",{className:"mt-4 mb-3 text-center",children:[e.jsxs("span",{className:"font-bold",children:["Here Your election is Live ðŸ‘‰ðŸ‘‰ðŸ‘‰ :"," "]}),e.jsx(m,{to:"/launch/<%= election?.url %>",target:"_blank",className:"text-blue-700",children:`https://online-voting-kcy6.onrender.com/${(E=t==null?void 0:t.election)==null?void 0:E.url}`})]})]}),((T=t==null?void 0:t.election)==null?void 0:T.end)&&e.jsxs("div",{children:[e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-red-900 bg-red-200 font-bold text-center mt-3 text-md",children:"Election is Ended ..."})}),e.jsxs("div",{className:" text-center mt-2 mb-3",children:[e.jsxs("span",{className:"font-bold",children:["Here view result of election ðŸ‘‰ðŸ‘‰ðŸ‘‰ :"," "]}),e.jsx(m,{to:`/launch/${(k=t==null?void 0:t.election)==null?void 0:k.url}`,target:"_blank",className:"text-blue-700",children:`https://online-voting-kcy6.onrender.com/${(S=t==null?void 0:t.election)==null?void 0:S.url}`})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("h3",{className:"text-xl font-bold my-3",children:"List Of Quetions For Election"}),e.jsx("div",{className:"grid gap-4 grid-cols-3 mt-5",children:t.quetion.map(s=>e.jsx("div",{className:"block p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{to:`/account/quetion/${h}/${s.id}`,children:e.jsxs("h5",{className:"mb-2 text-xl font-medium tracking-tight text-gray-900 dark:text-white",children:[e.jsxs("span",{className:"font-bold",children:[l("Title")," : "]}),s.title]})}),e.jsxs("p",{children:[e.jsx("span",{className:"text-md font-bold",children:"Description : "}),s.description]})]}),e.jsx("button",{onClick:()=>{L(s.id)},children:e.jsx(z,{className:"h-8 w-8 text-red-600 hover:bg-red-500 hover:text-white border-red-600 border-2 hover:border-red-700 p-1 rounded-md transition duration-1200","aria-hidden":"true"})})]})},`${s.id}-${s.title}`))}),e.jsx("div",{})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("p",{className:"my-2 text-xl",children:["Your Election have a"," ",e.jsxs("span",{className:"font-bold",children:[" ",t==null?void 0:t.totalVoter]})," ","Voters."]}),e.jsx(m,{to:`/account/voters/${d.id}`,className:"text-blue-900 hover:text-red-600 underline",children:"Manage Voters"})]}),e.jsxs("div",{className:"flex justify-between mt-6 mb-3",children:[e.jsx("a",{href:"/election/<%=election?.id%>/launch",className:"bg-pink-600 hover:bg-pink-700 text-white font-semibold border-2 border-gray-700 px-2 py-1 rounded",children:"Launch Election"}),e.jsx("a",{href:"/election/<%=election?.id%>/end",className:"bg-red-500 hover:bg-red-600 text-white font-semibold border-2 border-gray-700 px-2 py-1 rounded",children:"End Election"}),e.jsx("a",{href:"/election/<%=election?.id%>/preview/result",className:"bg-blue-700 hover:bg-blue-800 text-white font-semibold border-2 border-gray-700 px-2 py-1 rounded",children:"Preview Result"})]})]})};export{K as default};
//# sourceMappingURL=index-1dcc12e6.js.map

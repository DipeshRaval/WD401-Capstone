import{A as b,r as c,u as I,c as _,d as C,e as F,g as $,h as P,j as e,L,$ as h,_ as x,T as A}from"./index-2825ce6d.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[t]="0a841df8-7332-4378-85d3-066630bfffe0",o._sentryDebugIdIdentifier="sentry-dbid-0a841df8-7332-4378-85d3-066630bfffe0")}catch{}})();const B=async(o,t)=>{const a=localStorage.getItem("authToken")??"";try{o({type:"FETCH_OPTIONS_DETAIL_REQUEST"});const s=await fetch(`${b}/election/question/${t}/addOptions`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});debugger;const i=await s.json();debugger;o({type:"FETCH_OPTIONS_DETAIL_SUCCESS",payload:i})}catch(s){console.log("Error fetching selected quetion Option:",s),o({type:"FETCH_OPTIONS_DETAIL_FAILURE",payload:"Unable to load selected Quetion Option"})}},H=async(o,t,a)=>{try{debugger;const s=localStorage.getItem("authToken")??"",i=await fetch(`${b}/election/question/${t}/addOptions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(a)});debugger;const d=await i.json();if(!i.ok)throw new Error("Failed to create option for quetion "+t);return d.error?{ok:!1,error:d.error}:(o({type:"ADD_OPTION_SUCCESS",payload:d}),{ok:!0})}catch(s){return console.error("Operation failed:",s),{ok:!1,error:s}}},q=async(o,t)=>{try{const a=localStorage.getItem("authToken")??"";debugger;const s=await fetch(`${b}/election/option/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(!s.ok)throw new Error("Failed to delete option "+t);const i=await s.json();debugger;return i.error?{ok:!1,error:i.error}:i.success?(o({type:"DELETE_OPTION_SUCCESS",payload:t}),{ok:!0}):{ok:!1}}catch(a){return console.error("Operation failed:",a),{ok:!1,error:a}}},Q=()=>{var j;let[o,t]=c.useState(!1);const[a,s]=c.useState(null),i=()=>t(!0),d=()=>t(!1),{register:v,handleSubmit:w,formState:{errors:g}}=I();let{electionID:T,quetionID:u}=_();const{t:n}=C();debugger;const k=F(),{electionDetail:p}=k,O=$(),{optionsDetails:y,isLoading:E,isError:U,errorMessage:z}=O,m=P();c.useEffect(()=>{u&&B(m,u)},[u,m]);const l=(j=p==null?void 0:p.quetion.filter(r=>`${r==null?void 0:r.id}`===u))==null?void 0:j[0];if(E)return e.jsx(e.Fragment,{children:n("loading")});if(!l)return e.jsx("p",{className:"font-semibold text-center text-red-500",children:"There is not such a Quetion"});const S=async r=>{console.log(r);const f=await q(m,r);console.log(f)},D=async r=>{const{optionName:f}=r,N=await H(m,l==null?void 0:l.id,{name:f,qid:l==null?void 0:l.id});debugger;N.ok?t(!1):s(N.error)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto mb-3",children:e.jsx(L,{to:`/account/election/${T}`,className:"rounded text-white bg-black text-sm inline px-2 py-2",children:n("gotoBallotPage")})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h2",{className:"text-2xl mt-3 text-green-700 font-medium tracking-tight  dark:text-zinc-50",children:n("manageQuetion")}),e.jsx("button",{id:"newTaskBtn",onClick:i,className:"rounded-md bg-blue-600 px-4 py-2 m-2 text-sm font-medium text-white hover:bg-opacity-95 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75",children:n("newOptionButtonText")}),e.jsx(h,{appear:!0,show:o,as:c.Fragment,children:e.jsxs(x,{as:"div",className:"relative z-10",onClose:d,children:[e.jsx(h.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(h.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(x.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(x.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:n("NewQuetionModalHeader")}),e.jsx("div",{className:"mt-2",children:e.jsxs("form",{onSubmit:w(D),children:[a&&e.jsx("span",{className:"text-red-500",children:a}),e.jsx("input",{type:"text",id:"name",placeholder:n("newQueTitlePlaceHolder"),autoFocus:!0,...v("optionName",{required:!0}),className:`w-full border rounded-md py-2 px-3 my-4 text-gray-700 leading-tight focus:outline-none focus:border-blue-500 focus:shadow-outline-blue ${g.optionName?"border-red-500":""}`}),g.optionName&&e.jsx("span",{className:"text-red-500",children:"This field is required"}),e.jsx("button",{type:"submit",id:"create-member-btn",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 mr-2 text-sm font-medium text-white hover:bg-blue-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",children:n("submitButtonText")}),e.jsx("button",{type:"submit",onClick:d,className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",children:n("cancelButtonText")})]})})]})})})})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl mt-3",children:[e.jsx("span",{className:"text-blue-700 font-sans font-bold",children:n("quetionTitleLable")}),l.title]}),e.jsxs("p",{className:"my-3 text-lg",children:[e.jsx("span",{className:"text-blue-700 font-sans font-bold text-md",children:n("quetionDescLable")}),l.description]})]}),y.options.length?e.jsxs("div",{className:"mt-5",children:[e.jsx("h3",{className:"text-xl font-bold my-3",children:n("listHeaderOption")}),e.jsx("div",{className:"grid gap-4 grid-cols-4 mt-5",children:y.options.map(r=>e.jsx("div",{className:"block p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsxs("h5",{className:"mb-2 text-lg font-medium tracking-tight text-slate-700 dark:text-white",children:[e.jsxs("span",{className:"font-bold",children:[n("optionName")," : "]}),r.optionName]})}),e.jsx("button",{onClick:()=>{S(r.id)},children:e.jsx(A,{className:"h-8 w-8 text-red-600 hover:bg-red-500 hover:text-white border-red-600 border-2 hover:border-red-700 p-1 rounded-md transition duration-1200","aria-hidden":"true"})})]})},`${r.id}-${r.optionName}`))}),e.jsx("div",{})]}):e.jsx("p",{className:"text-red-500",children:n("noOptionadded")})]})};export{Q as default};
//# sourceMappingURL=OptionsDetail-09007d0d.js.map
